{"ast":null,"code":"import React,{useState,useCallback}from'react';import DiagramCanvas from'../components/DiagramCanvas';import{useMutation,useQuery,useQueryClient}from'@tanstack/react-query';import{apiService}from'../services/apiService';import toast from'react-hot-toast';import{FiSave,FiVideo,FiX}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Whiteboard=()=>{// State management\nconst[diagramData,setDiagramData]=useState('');const[selectedSession,setSelectedSession]=useState('');const[showVideoPanel,setShowVideoPanel]=useState(false);const[showNewNoteForm,setShowNewNoteForm]=useState(false);const[formError,setFormError]=useState(null);const[isSaving,setIsSaving]=useState(false);// Video generation state\nconst[videoState,setVideoState]=useState({text:'',voice:'default',style:'default',url:undefined,loading:false,error:null});// Form validation\nconst validateForm=()=>{if(!newNote.title.trim()){setFormError('Title is required');return false;}if(!newNote.module_code.trim()){setFormError('Module code is required');return false;}if(!newNote.content.trim()){setFormError('Content is required');return false;}setFormError(null);return true;};// Note form state\nconst[newNote,setNewNote]=useState({title:'',module_code:'',chapters:'',detail_level:'basic',content:''});const queryClient=useQueryClient();// Fetch sessions\nconst{data:sessionsData,isLoading:sessionsLoading}=useQuery({queryKey:['sessions'],queryFn:apiService.getSessions,onSuccess:data=>{var _data$sessions;if((data===null||data===void 0?void 0:(_data$sessions=data.sessions)===null||_data$sessions===void 0?void 0:_data$sessions.length)>0&&!selectedSession){setSelectedSession(data.sessions[0].session_id);// Load the diagram data if available\nconst session=data.sessions[0];if(session.diagram_data){setDiagramData(session.diagram_data);}}}});const sessions=(sessionsData===null||sessionsData===void 0?void 0:sessionsData.sessions)||[];// Create session mutation\nconst createSessionMutation=useMutation({mutationFn:async data=>{const response=await apiService.createSession(data);return response.data;},onSuccess:()=>{toast.success('Note created successfully');setShowNewNoteForm(false);setNewNote({title:'',module_code:'',chapters:'',detail_level:'basic',content:''});queryClient.invalidateQueries({queryKey:['sessions']});},onError:error=>{console.error('Error creating note:',error);toast.error('Failed to create note');}});// Save diagram mutation\nconst saveDiagramMutation=useMutation({mutationFn:async _ref=>{let{sessionId,data,diagramType='freehand'}=_ref;await apiService.saveDiagram(sessionId,data,diagramType);},onSuccess:()=>{toast.success('Diagram saved successfully');queryClient.invalidateQueries({queryKey:['sessions']});},onError:error=>{console.error('Error saving diagram:',error);toast.error('Failed to save diagram');}});// Handle generating video from notes\nconst handleGenerateVideo=useCallback(async()=>{if(!videoState.text.trim()){toast.error('Please enter some text for the video');return;}try{setVideoState(prev=>({...prev,loading:true,error:null}));// Simulate API call with timeout (replace with actual API call when ready)\nawait new Promise(resolve=>setTimeout(resolve,2000));// In a real app, this would be an actual API call\nconst videoUrl=`https://example.com/generated-video-${Date.now()}.mp4`;setVideoState(prev=>({...prev,loading:false,url:videoUrl}));toast.success('Video generated successfully!');}catch(error){console.error('Error generating video:',error);const errorMessage=error instanceof Error?error.message:'Failed to generate video';setVideoState(prev=>({...prev,loading:false,error:errorMessage}));toast.error(errorMessage);}},[videoState.text,videoState.voice,videoState.style,diagramData]);// Handle saving diagram to the current note\nconst handleSaveDiagram=useCallback(()=>{if(!selectedSession){toast.error('Please select a note to save the diagram to');return;}if(!diagramData){toast.error('No diagram data to save');return;}saveDiagramMutation.mutate({sessionId:selectedSession,data:diagramData,diagramType:'freehand'});},[selectedSession,diagramData,saveDiagramMutation]);// Handle saving the diagram when drawing\nconst handleSaveDrawing=useCallback(data=>{setDiagramData(data);// Auto-save to the selected session if available\nif(selectedSession){saveDiagramMutation.mutate({sessionId:selectedSession,data,diagramType:'freehand'});}},[selectedSession,saveDiagramMutation]);// Handle auto-saving the diagram\nconst handleAutoSave=useCallback(data=>{setDiagramData(data);},[]);// Handle creating a new note\nconst handleCreateNote=useCallback(async()=>{if(!validateForm())return;setIsSaving(true);setFormError(null);try{await createSessionMutation.mutateAsync({...newNote,diagram_data:diagramData});}catch(error){console.error('Error creating note:',error);setFormError('Failed to create note. Please try again.');}finally{setIsSaving(false);}},[newNote,diagramData,createSessionMutation]);// Handle note input change\nconst handleNoteChange=useCallback(e=>{const{name,value}=e.target;setNewNote(prev=>({...prev,[name]:value}));},[]);// Video generation handlers\nconst handleVideoTextChange=useCallback(e=>{setVideoState(prev=>({...prev,text:e.target.value}));},[]);const handleVoiceChange=useCallback(e=>{setVideoState(prev=>({...prev,voice:e.target.value}));},[]);const handleStyleChange=useCallback(e=>{setVideoState(prev=>({...prev,style:e.target.value}));},[]);// Loading overlay\nif(isSaving){return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:\"Creating your note...\"})]})});}// Main component render\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto py-8 px-4\",children:[formError&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:formError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Whiteboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewNoteForm(true),className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\",children:\"New Note\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowVideoPanel(!showVideoPanel),className:\"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors\",children:showVideoPanel?'Hide Video Panel':'Generate Video'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 bg-white rounded-lg shadow-md p-4\",children:[/*#__PURE__*/_jsx(DiagramCanvas,{onSave:handleSaveDrawing,onAutoSave:handleAutoSave,initialData:diagramData}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex flex-wrap gap-3\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDiagramData(''),className:\"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 rounded-md text-sm font-medium transition-colors\",children:\"Clear Canvas\"})})]}),showVideoPanel&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Generate Video\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Notes for Video\"}),/*#__PURE__*/_jsx(\"textarea\",{value:videoState.text,onChange:handleVideoTextChange,placeholder:\"Enter your notes here...\",className:\"w-full border rounded-md p-2 min-h-[100px] text-sm\",disabled:videoState.loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Voice\"}),/*#__PURE__*/_jsxs(\"select\",{value:videoState.voice,onChange:handleVoiceChange,className:\"w-full border rounded-md p-2 text-sm\",disabled:videoState.loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"default\",children:\"Default\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Style\"}),/*#__PURE__*/_jsxs(\"select\",{value:videoState.style,onChange:handleStyleChange,className:\"w-full border rounded-md p-2 text-sm\",disabled:videoState.loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"default\",children:\"Default\"}),/*#__PURE__*/_jsx(\"option\",{value:\"educational\",children:\"Educational\"}),/*#__PURE__*/_jsx(\"option\",{value:\"casual\",children:\"Casual\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateVideo,disabled:videoState.loading||!videoState.text.trim(),className:\"w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\",children:videoState.loading?'Generating...':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FiVideo,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Generate Video\"})]})}),videoState.error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm\",children:videoState.error}),videoState.url&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"video\",{src:videoState.url,controls:true,className:\"w-full rounded-md\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 flex justify-end\",children:/*#__PURE__*/_jsx(\"a\",{href:videoState.url,download:\"generated-video.mp4\",className:\"text-sm text-blue-600 hover:underline\",children:\"Download Video\"})})]})]})]})]}),showNewNoteForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold\",children:\"Create New Note\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewNoteForm(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(FiX,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:newNote.title,onChange:handleNoteChange,className:`w-full border rounded-md p-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent ${formError&&!newNote.title?'border-red-500':''}`,placeholder:\"Enter note title\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Module Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"module_code\",value:newNote.module_code,onChange:handleNoteChange,className:`w-full border rounded-md p-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent ${formError&&!newNote.module_code?'border-red-500':''}`,placeholder:\"e.g., CS101\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Detail Level\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"detail_level\",value:newNote.detail_level,onChange:handleNoteChange,className:\"w-full border rounded-md p-2 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"basic\",children:\"Basic\"}),/*#__PURE__*/_jsx(\"option\",{value:\"intermediate\",children:\"Intermediate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"advanced\",children:\"Advanced\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Chapters/Topics\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"chapters\",value:newNote.chapters,onChange:handleNoteChange,className:\"w-full border rounded-md p-2 text-sm\",placeholder:\"e.g., Chapter 1, 2, 3\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Content *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"content\",value:newNote.content,onChange:handleNoteChange,className:`w-full border rounded-md p-2 text-sm min-h-[150px] focus:ring-2 focus:ring-blue-500 focus:border-transparent ${formError&&!newNote.content?'border-red-500':''}`,placeholder:\"Enter your note content here...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNewNoteForm(false),className:\"px-4 py-2 border rounded-md text-sm font-medium hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCreateNote,disabled:!newNote.title||!newNote.module_code||!newNote.content||createSessionMutation.isLoading,className:\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors duration-200\",children:createSessionMutation.isLoading?'Creating...':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FiSave,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Create Note\"})]})})]})]})]})})]});};const isSameSession=(a,b)=>a.session_id===b.session_id;export default Whiteboard;","map":{"version":3,"names":["React","useState","useCallback","DiagramCanvas","useMutation","useQuery","useQueryClient","apiService","toast","FiSave","FiVideo","FiX","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Whiteboard","diagramData","setDiagramData","selectedSession","setSelectedSession","showVideoPanel","setShowVideoPanel","showNewNoteForm","setShowNewNoteForm","formError","setFormError","isSaving","setIsSaving","videoState","setVideoState","text","voice","style","url","undefined","loading","error","validateForm","newNote","title","trim","module_code","content","setNewNote","chapters","detail_level","queryClient","data","sessionsData","isLoading","sessionsLoading","queryKey","queryFn","getSessions","onSuccess","_data$sessions","sessions","length","session_id","session","diagram_data","createSessionMutation","mutationFn","response","createSession","success","invalidateQueries","onError","console","saveDiagramMutation","_ref","sessionId","diagramType","saveDiagram","handleGenerateVideo","prev","Promise","resolve","setTimeout","videoUrl","Date","now","errorMessage","Error","message","handleSaveDiagram","mutate","handleSaveDrawing","handleAutoSave","handleCreateNote","mutateAsync","handleNoteChange","e","name","value","target","handleVideoTextChange","handleVoiceChange","handleStyleChange","className","children","role","onClick","onSave","onAutoSave","initialData","onChange","placeholder","disabled","size","src","controls","href","download","type","required","isSameSession","a","b"],"sources":["C:/Users/User/notefusion-ai/notefusion-ai/frontend/src/pages/Whiteboard.tsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport DiagramCanvas from '../components/DiagramCanvas';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { apiService } from '../services/apiService';\nimport toast from 'react-hot-toast';\nimport { FiSave, FiVideo, FiPlus, FiX } from 'react-icons/fi';\n\ninterface SessionsApiResponse {\n  sessions: Session[];\n}\n\ninterface Session {\n  session_id: string;\n  module_code: string;\n  title: string;\n  chapters: string;\n  detail_level: string;\n  created_at: string;\n  updated_at: string;\n  diagram_data?: string;\n}\n\ninterface NoteFormData {\n  title: string;\n  module_code: string;\n  chapters: string;\n  detail_level: string;\n  content: string;\n  diagram_data?: string;\n}\n\ninterface SaveDiagramParams {\n  sessionId: string;\n  data: string;\n  diagramType?: string;\n}\n\nconst Whiteboard: React.FC = () => {\n  // State management\n  const [diagramData, setDiagramData] = useState<string>('');\n  const [selectedSession, setSelectedSession] = useState<string>('');\n  const [showVideoPanel, setShowVideoPanel] = useState(false);\n  const [showNewNoteForm, setShowNewNoteForm] = useState(false);\n  const [formError, setFormError] = useState<string | null>(null);\n  const [isSaving, setIsSaving] = useState(false);\n  \n  // Video generation state\n  const [videoState, setVideoState] = useState({\n    text: '',\n    voice: 'default' as 'default' | 'male' | 'female',\n    style: 'default' as 'default' | 'educational' | 'casual',\n    url: undefined as string | undefined,\n    loading: false,\n    error: null as string | null\n  });\n\n  // Form validation\n  const validateForm = (): boolean => {\n    if (!newNote.title.trim()) {\n      setFormError('Title is required');\n      return false;\n    }\n    if (!newNote.module_code.trim()) {\n      setFormError('Module code is required');\n      return false;\n    }\n    if (!newNote.content.trim()) {\n      setFormError('Content is required');\n      return false;\n    }\n    setFormError(null);\n    return true;\n  };\n  \n  // Note form state\n  const [newNote, setNewNote] = useState<NoteFormData>({\n    title: '',\n    module_code: '',\n    chapters: '',\n    detail_level: 'basic',\n    content: ''\n  });\n  \n  const queryClient = useQueryClient();\n  \n  // Fetch sessions\n  const { data: sessionsData, isLoading: sessionsLoading } = useQuery<SessionsApiResponse, Error>(\n    {\n      queryKey: ['sessions'],\n      queryFn: apiService.getSessions,\n      onSuccess: (data) => {\n        if (data?.sessions?.length > 0 && !selectedSession) {\n          setSelectedSession(data.sessions[0].session_id);\n          // Load the diagram data if available\n          const session = data.sessions[0];\n          if (session.diagram_data) {\n            setDiagramData(session.diagram_data);\n          }\n        }\n      }\n    }\n  );\n  \n  const sessions = sessionsData?.sessions || [];\n  \n  // Create session mutation\n  const createSessionMutation = useMutation({\n    mutationFn: async (data: NoteFormData) => {\n      const response = await apiService.createSession(data);\n      return response.data;\n    },\n    onSuccess: () => {\n      toast.success('Note created successfully');\n      setShowNewNoteForm(false);\n      setNewNote({\n        title: '',\n        module_code: '',\n        chapters: '',\n        detail_level: 'basic',\n        content: ''\n      });\n      queryClient.invalidateQueries({ queryKey: ['sessions'] });\n    },\n    onError: (error: Error) => {\n      console.error('Error creating note:', error);\n      toast.error('Failed to create note');\n    }\n  });\n  \n  // Save diagram mutation\n  const saveDiagramMutation = useMutation({\n    mutationFn: async ({ sessionId, data, diagramType = 'freehand' }: SaveDiagramParams) => {\n      await apiService.saveDiagram(sessionId, data, diagramType);\n    },\n    onSuccess: () => {\n      toast.success('Diagram saved successfully');\n      queryClient.invalidateQueries({ queryKey: ['sessions'] });\n    },\n    onError: (error: Error) => {\n      console.error('Error saving diagram:', error);\n      toast.error('Failed to save diagram');\n    }\n  });\n  \n  // Handle generating video from notes\n  const handleGenerateVideo = useCallback(async (): Promise<void> => {\n    if (!videoState.text.trim()) {\n      toast.error('Please enter some text for the video');\n      return;\n    }\n\n    try {\n      setVideoState(prev => ({ ...prev, loading: true, error: null }));\n      \n      // Simulate API call with timeout (replace with actual API call when ready)\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      // In a real app, this would be an actual API call\n      const videoUrl = `https://example.com/generated-video-${Date.now()}.mp4`;\n      \n      setVideoState(prev => ({\n        ...prev,\n        loading: false,\n        url: videoUrl\n      }));\n      \n      toast.success('Video generated successfully!');\n    } catch (error) {\n      console.error('Error generating video:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Failed to generate video';\n      setVideoState(prev => ({\n        ...prev,\n        loading: false,\n        error: errorMessage\n      }));\n      toast.error(errorMessage);\n    }\n  }, [videoState.text, videoState.voice, videoState.style, diagramData]);\n\n  // Handle saving diagram to the current note\n  const handleSaveDiagram = useCallback((): void => {\n    if (!selectedSession) {\n      toast.error('Please select a note to save the diagram to');\n      return;\n    }\n    \n    if (!diagramData) {\n      toast.error('No diagram data to save');\n      return;\n    }\n    \n    saveDiagramMutation.mutate({\n      sessionId: selectedSession,\n      data: diagramData,\n      diagramType: 'freehand'\n    });\n  }, [selectedSession, diagramData, saveDiagramMutation]);\n  \n  // Handle saving the diagram when drawing\n  const handleSaveDrawing = useCallback((data: string): void => {\n    setDiagramData(data);\n    // Auto-save to the selected session if available\n    if (selectedSession) {\n      saveDiagramMutation.mutate({\n        sessionId: selectedSession,\n        data,\n        diagramType: 'freehand'\n      });\n    }\n  }, [selectedSession, saveDiagramMutation]);\n\n  // Handle auto-saving the diagram\n  const handleAutoSave = useCallback((data: string): void => {\n    setDiagramData(data);\n  }, []);\n\n  // Handle creating a new note\n  const handleCreateNote = useCallback(async (): Promise<void> => {\n    if (!validateForm()) return;\n    \n    setIsSaving(true);\n    setFormError(null);\n    \n    try {\n      await createSessionMutation.mutateAsync({\n        ...newNote,\n        diagram_data: diagramData\n      });\n    } catch (error) {\n      console.error('Error creating note:', error);\n      setFormError('Failed to create note. Please try again.');\n    } finally {\n      setIsSaving(false);\n    }\n  }, [newNote, diagramData, createSessionMutation]);\n\n\n  // Handle note input change\n  const handleNoteChange = useCallback((e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setNewNote(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  }, []);\n  \n  // Video generation handlers\n  const handleVideoTextChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setVideoState(prev => ({ ...prev, text: e.target.value }));\n  }, []);\n\n  const handleVoiceChange = useCallback((e: React.ChangeEvent<HTMLSelectElement>) => {\n    setVideoState(prev => ({ ...prev, voice: e.target.value as 'default' | 'male' | 'female' }));\n  }, []);\n\n  const handleStyleChange = useCallback((e: React.ChangeEvent<HTMLSelectElement>) => {\n    setVideoState(prev => ({ ...prev, style: e.target.value as 'default' | 'educational' | 'casual' }));\n  }, []);\n\n  // Loading overlay\n  if (isSaving) {\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n        <div className=\"bg-white p-6 rounded-lg shadow-xl text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-700\">Creating your note...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Main component render\n  return (\n    <div className=\"max-w-6xl mx-auto py-8 px-4\">\n      {/* Error message */}\n      {formError && (\n        <div className=\"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" role=\"alert\">\n          <p className=\"font-medium\">Error</p>\n          <p>{formError}</p>\n        </div>\n      )}\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold\">Whiteboard</h1>\n        <div className=\"flex gap-3\">\n          <button\n            onClick={() => setShowNewNoteForm(true)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n          >\n            New Note\n          </button>\n          <button\n            onClick={() => setShowVideoPanel(!showVideoPanel)}\n            className=\"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors\"\n          >\n            {showVideoPanel ? 'Hide Video Panel' : 'Generate Video'}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Main whiteboard area */}\n        <div className=\"lg:col-span-2 bg-white rounded-lg shadow-md p-4\">\n          <DiagramCanvas \n            onSave={handleSaveDrawing}\n            onAutoSave={handleAutoSave}\n            initialData={diagramData}\n          />\n          \n          <div className=\"mt-4 flex flex-wrap gap-3\">\n            <button\n              onClick={() => setDiagramData('')}\n              className=\"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 rounded-md text-sm font-medium transition-colors\"\n            >\n              Clear Canvas\n            </button>\n          </div>\n        </div>\n\n        {/* Video generation panel */}\n        {showVideoPanel && (\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h2 className=\"text-lg font-semibold mb-4\">Generate Video</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Notes for Video\n                </label>\n                <textarea\n                  value={videoState.text}\n                  onChange={handleVideoTextChange}\n                  placeholder=\"Enter your notes here...\"\n                  className=\"w-full border rounded-md p-2 min-h-[100px] text-sm\"\n                  disabled={videoState.loading}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Voice\n                  </label>\n                  <select\n                    value={videoState.voice}\n                    onChange={handleVoiceChange}\n                    className=\"w-full border rounded-md p-2 text-sm\"\n                    disabled={videoState.loading}\n                  >\n                    <option value=\"default\">Default</option>\n                    <option value=\"male\">Male</option>\n                    <option value=\"female\">Female</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Style\n                  </label>\n                  <select\n                    value={videoState.style}\n                    onChange={handleStyleChange}\n                    className=\"w-full border rounded-md p-2 text-sm\"\n                    disabled={videoState.loading}\n                  >\n                    <option value=\"default\">Default</option>\n                    <option value=\"educational\">Educational</option>\n                    <option value=\"casual\">Casual</option>\n                  </select>\n                </div>\n              </div>\n\n              <button\n                onClick={handleGenerateVideo}\n                disabled={videoState.loading || !videoState.text.trim()}\n                className=\"w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2\"\n              >\n                {videoState.loading ? (\n                  'Generating...'\n                ) : (\n                  <>\n                    <FiVideo size={16} />\n                    <span>Generate Video</span>\n                  </>\n                )}\n              </button>\n\n              {videoState.error && (\n                <div className=\"text-red-600 text-sm\">{videoState.error}</div>\n              )}\n\n              {videoState.url && (\n                <div className=\"mt-4\">\n                  <video\n                    src={videoState.url}\n                    controls\n                    className=\"w-full rounded-md\"\n                  />\n                  <div className=\"mt-2 flex justify-end\">\n                    <a\n                      href={videoState.url}\n                      download=\"generated-video.mp4\"\n                      className=\"text-sm text-blue-600 hover:underline\"\n                    >\n                      Download Video\n                    </a>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* New Note Modal */}\n      {showNewNoteForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-xl font-bold\">Create New Note</h2>\n              <button\n                onClick={() => setShowNewNoteForm(false)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                <FiX size={24} />\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Title *\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"title\"\n                  value={newNote.title}\n                  onChange={handleNoteChange}\n                  className={`w-full border rounded-md p-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                    formError && !newNote.title ? 'border-red-500' : ''\n                  }`}\n                  placeholder=\"Enter note title\"\n                  required\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Module Code *\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"module_code\"\n                    value={newNote.module_code}\n                    onChange={handleNoteChange}\n                    className={`w-full border rounded-md p-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                      formError && !newNote.module_code ? 'border-red-500' : ''\n                    }`}\n                    placeholder=\"e.g., CS101\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Detail Level\n                  </label>\n                  <select\n                    name=\"detail_level\"\n                    value={newNote.detail_level}\n                    onChange={handleNoteChange}\n                    className=\"w-full border rounded-md p-2 text-sm\"\n                  >\n                    <option value=\"basic\">Basic</option>\n                    <option value=\"intermediate\">Intermediate</option>\n                    <option value=\"advanced\">Advanced</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Chapters/Topics\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"chapters\"\n                  value={newNote.chapters}\n                  onChange={handleNoteChange}\n                  className=\"w-full border rounded-md p-2 text-sm\"\n                  placeholder=\"e.g., Chapter 1, 2, 3\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Content *\n                </label>\n                <textarea\n                  name=\"content\"\n                  value={newNote.content}\n                  onChange={handleNoteChange}\n                  className={`w-full border rounded-md p-2 text-sm min-h-[150px] focus:ring-2 focus:ring-blue-500 focus:border-transparent ${\n                    formError && !newNote.content ? 'border-red-500' : ''\n                  }`}\n                  placeholder=\"Enter your note content here...\"\n                  required\n                />\n              </div>\n\n              <div className=\"flex justify-end gap-3 pt-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowNewNoteForm(false)}\n                  className=\"px-4 py-2 border rounded-md text-sm font-medium hover:bg-gray-50\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleCreateNote}\n                  disabled={!newNote.title || !newNote.module_code || !newNote.content || createSessionMutation.isLoading}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors duration-200\"\n                >\n                  {createSessionMutation.isLoading ? 'Creating...' : (\n                    <>\n                      <FiSave size={16} />\n                      <span>Create Note</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst isSameSession = (a: Session, b: Session) => a.session_id === b.session_id;\n\nexport default Whiteboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}